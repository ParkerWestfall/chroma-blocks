{"version":3,"sources":["/Users/gziolo/PhpstormProjects/gutenberg/packages/compose/src/with-safe-timeout/index.js"],"names":["without","Component","createHigherOrderComponent","window","clearTimeout","setTimeout","withSafeTimeout","OriginalComponent","arguments","timeouts","bind","forEach","fn","delay","id","push","props"],"mappings":";;;;;;;;;;AAAA;;;AAGA,SAASA,OAAT,QAAwB,QAAxB;AAEA;;;;AAGA,SAASC,SAAT,QAA0B,oBAA1B;AAEA;;;;AAGA,OAAOC,0BAAP,MAAuC,kCAAvC;AAEA;;;;cAGqCC,M;IAA7BC,a,WAAAA,Y;IAAcC,W,WAAAA,U;AAEtB;;;;;;;;;AAQA,IAAMC,eAAe,GAAGJ,0BAA0B,CACjD,UAAEK,iBAAF,EAAyB;AACxB;AAAA;AAAA;AAAA;;AACC,kCAAc;AAAA;;AAAA;;AACb,+FAAUC,SAAV;AACA,cAAKC,QAAL,GAAgB,EAAhB;AACA,cAAKJ,UAAL,GAAkB,MAAKA,UAAL,CAAgBK,IAAhB,uDAAlB;AACA,cAAKN,YAAL,GAAoB,MAAKA,YAAL,CAAkBM,IAAlB,uDAApB;AAJa;AAKb;;AANF;AAAA;AAAA,+CAQwB;AACtB,eAAKD,QAAL,CAAcE,OAAd,CAAuBP,aAAvB;AACA;AAVF;AAAA;AAAA,mCAYaQ,EAZb,EAYiBC,KAZjB,EAYyB;AAAA;;AACvB,cAAMC,EAAE,GAAGT,WAAU,CAAE,YAAM;AAC5BO,YAAAA,EAAE;;AACF,YAAA,MAAI,CAACR,YAAL,CAAmBU,EAAnB;AACA,WAHoB,EAGlBD,KAHkB,CAArB;;AAIA,eAAKJ,QAAL,CAAcM,IAAd,CAAoBD,EAApB;AACA,iBAAOA,EAAP;AACA;AAnBF;AAAA;AAAA,qCAqBeA,EArBf,EAqBoB;AAClBV,UAAAA,aAAY,CAAEU,EAAF,CAAZ;;AACA,eAAKL,QAAL,GAAgBT,OAAO,CAAE,KAAKS,QAAP,EAAiBK,EAAjB,CAAvB;AACA;AAxBF;AAAA;AAAA,iCA0BU;AACR,iBACC,cAAC,iBAAD,eACM,KAAKE,KADX;AAEC,YAAA,UAAU,EAAG,KAAKX,UAFnB;AAGC,YAAA,YAAY,EAAG,KAAKD;AAHrB,aADD;AAOA;AAlCF;;AAAA;AAAA,MAAsCH,SAAtC;AAAA;AAoCA,CAtCgD,EAuCjD,iBAvCiD,CAAlD;AA0CA,eAAeK,eAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { without } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport createHigherOrderComponent from '../create-higher-order-component';\n\n/**\n * Browser dependencies\n */\nconst { clearTimeout, setTimeout } = window;\n\n/**\n * A higher-order component used to provide and manage delayed function calls\n * that ought to be bound to a component's lifecycle.\n *\n * @param {Component} OriginalComponent Component requiring setTimeout\n *\n * @return {Component}                  Wrapped component.\n */\nconst withSafeTimeout = createHigherOrderComponent(\n\t( OriginalComponent ) => {\n\t\treturn class WrappedComponent extends Component {\n\t\t\tconstructor() {\n\t\t\t\tsuper( ...arguments );\n\t\t\t\tthis.timeouts = [];\n\t\t\t\tthis.setTimeout = this.setTimeout.bind( this );\n\t\t\t\tthis.clearTimeout = this.clearTimeout.bind( this );\n\t\t\t}\n\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tthis.timeouts.forEach( clearTimeout );\n\t\t\t}\n\n\t\t\tsetTimeout( fn, delay ) {\n\t\t\t\tconst id = setTimeout( () => {\n\t\t\t\t\tfn();\n\t\t\t\t\tthis.clearTimeout( id );\n\t\t\t\t}, delay );\n\t\t\t\tthis.timeouts.push( id );\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t\tclearTimeout( id ) {\n\t\t\t\tclearTimeout( id );\n\t\t\t\tthis.timeouts = without( this.timeouts, id );\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\treturn (\n\t\t\t\t\t<OriginalComponent\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tsetTimeout={ this.setTimeout }\n\t\t\t\t\t\tclearTimeout={ this.clearTimeout }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t},\n\t'withSafeTimeout'\n);\n\nexport default withSafeTimeout;\n"]}