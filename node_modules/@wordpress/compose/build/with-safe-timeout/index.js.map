{"version":3,"sources":["/Users/gziolo/PhpstormProjects/gutenberg/packages/compose/src/with-safe-timeout/index.js"],"names":["window","clearTimeout","setTimeout","withSafeTimeout","OriginalComponent","arguments","timeouts","bind","forEach","fn","delay","id","push","props","Component"],"mappings":";;;;;;;;;AAQA;;;;;;;;;;;;;;;;;;AALA;;AAUA;;AAbA;;;;AAKA;;;;AAKA;;;;AAKA;;;cAGqCA,M;IAA7BC,a,WAAAA,Y;IAAcC,W,WAAAA,U;AAEtB;;;;;;;;;AAQA,IAAMC,eAAe,GAAG,yCACvB,UAAEC,iBAAF,EAAyB;AACxB;AAAA;AAAA;AAAA;;AACC,kCAAc;AAAA;;AAAA;AACb,2HAAUC,SAAV;AACA,cAAKC,QAAL,GAAgB,EAAhB;AACA,cAAKJ,UAAL,GAAkB,MAAKA,UAAL,CAAgBK,IAAhB,mFAAlB;AACA,cAAKN,YAAL,GAAoB,MAAKA,YAAL,CAAkBM,IAAlB,mFAApB;AAJa;AAKb;;AANF;AAAA;AAAA,+CAQwB;AACtB,eAAKD,QAAL,CAAcE,OAAd,CAAuBP,aAAvB;AACA;AAVF;AAAA;AAAA,mCAYaQ,EAZb,EAYiBC,KAZjB,EAYyB;AAAA;;AACvB,cAAMC,EAAE,GAAGT,WAAU,CAAE,YAAM;AAC5BO,YAAAA,EAAE;;AACF,YAAA,MAAI,CAACR,YAAL,CAAmBU,EAAnB;AACA,WAHoB,EAGlBD,KAHkB,CAArB;;AAIA,eAAKJ,QAAL,CAAcM,IAAd,CAAoBD,EAApB;AACA,iBAAOA,EAAP;AACA;AAnBF;AAAA;AAAA,qCAqBeA,EArBf,EAqBoB;AAClBV,UAAAA,aAAY,CAAEU,EAAF,CAAZ;;AACA,eAAKL,QAAL,GAAgB,qBAAS,KAAKA,QAAd,EAAwBK,EAAxB,CAAhB;AACA;AAxBF;AAAA;AAAA,iCA0BU;AACR,iBACC,4BAAC,iBAAD,6BACM,KAAKE,KADX;AAEC,YAAA,UAAU,EAAG,KAAKX,UAFnB;AAGC,YAAA,YAAY,EAAG,KAAKD;AAHrB,aADD;AAOA;AAlCF;AAAA;AAAA,MAAsCa,kBAAtC;AAAA;AAoCA,CAtCsB,EAuCvB,iBAvCuB,CAAxB;eA0CeX,e","sourcesContent":["/**\n * External dependencies\n */\nimport { without } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport createHigherOrderComponent from '../create-higher-order-component';\n\n/**\n * Browser dependencies\n */\nconst { clearTimeout, setTimeout } = window;\n\n/**\n * A higher-order component used to provide and manage delayed function calls\n * that ought to be bound to a component's lifecycle.\n *\n * @param {Component} OriginalComponent Component requiring setTimeout\n *\n * @return {Component}                  Wrapped component.\n */\nconst withSafeTimeout = createHigherOrderComponent(\n\t( OriginalComponent ) => {\n\t\treturn class WrappedComponent extends Component {\n\t\t\tconstructor() {\n\t\t\t\tsuper( ...arguments );\n\t\t\t\tthis.timeouts = [];\n\t\t\t\tthis.setTimeout = this.setTimeout.bind( this );\n\t\t\t\tthis.clearTimeout = this.clearTimeout.bind( this );\n\t\t\t}\n\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tthis.timeouts.forEach( clearTimeout );\n\t\t\t}\n\n\t\t\tsetTimeout( fn, delay ) {\n\t\t\t\tconst id = setTimeout( () => {\n\t\t\t\t\tfn();\n\t\t\t\t\tthis.clearTimeout( id );\n\t\t\t\t}, delay );\n\t\t\t\tthis.timeouts.push( id );\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t\tclearTimeout( id ) {\n\t\t\t\tclearTimeout( id );\n\t\t\t\tthis.timeouts = without( this.timeouts, id );\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\treturn (\n\t\t\t\t\t<OriginalComponent\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tsetTimeout={ this.setTimeout }\n\t\t\t\t\t\tclearTimeout={ this.clearTimeout }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t},\n\t'withSafeTimeout'\n);\n\nexport default withSafeTimeout;\n"]}